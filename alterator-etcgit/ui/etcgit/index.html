<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html wf="none">
  <head>
    <link type="text/css" rel="stylesheet" href="/design/styles/etcgit.css" />
    <script type="text/javascript">
      function askCommit (title, ok, cancel, id) {
        var buttons = {};

        buttons[ok] = function() {
          $(this).dialog('destroy');
          form_ajax (id, {
            retcode: '#t',
            msg: $('input:text[name=commit-message]').val (),
            branch: $('input:radio[name=commit-new]:checked').val (),
            branchName: $('input:text[name=commit-branch]').val ()
          });
        };
        buttons[cancel] = function() {
          $(this).dialog('destroy');
          form_ajax (id, { retcode: '#f' });
        };
        $('#commit-popup').dialog ({
            title: title,
            bgiframe: true,
            modal: true,
            closeOnEscape: true,
            resizable: false,
            width: 400,
            buttons: buttons
        });
      }

      function commitNewChanged () {
        form_update_activity ('commit-branch', $('input:radio[name=commit-new]:checked').val () == "#t");
      }
    </script>
  </head>
  <body>
    <form method="POST">
      <div>
	<span translate="_">Configuration repository:</span>
	<input type="text" class="text" name="url" />
	<input class="btn" type="button" name="fetch" value="Fetch" />
	<span translate="_">Profile:</span>
	<select name="branch" />
		<input class="btn" type="button" name="history" value="View log&#8230;" />
	<input class="btn" type="button" name="reset-to" value="Reset to" />
	<input class="btn" type="button" name="update" value="Update profile" />
	<input class="btn" type="button" name="new" value="New profile&#8230;" />
      </div>
      <div>
      <h3><span translate="_">Modified files</span></h3>
      <span class="A"><b>A</b></span> — <span translate="_">new</span>, <span class="M"><b>M</b></span> — <span translate="_">modified</span>, <span class="D"><b>D</b></span> — <span translate="_">deleted</span>
      <table name="files" class="alterator-listbox" width="100%">
        <thead class="frame-table">
          <tr>
            <th width="99%"><span translate="_">Filename</span></th>
            <th><span translate="_">Status</span></th>
          </tr>
        </thead>
        <tbody class="frame-table">
          <tr alterator-class="class">
            <td nowrap="nowrap" width="99%">
	      <a class="alterator-href" prefix-href="/etcgit/diff?file=" name="filename">
	        <span class="alterator-label" name="filename" />
	      </a>
	    </td>
            <td nowrap="nowrap"><span class="alterator-label" name="status" /></td>
          </tr>
        </tbody>
      </table>
      </div>
    </form>
    <div style="display:none" id="commit-popup">
      <table width="100%">
        <tr>
          <td><span translate="_">Please, briefly describe the done modifications:</span></td>
        </tr>
        <tr>
          <td><input type="text" class="text" name="commit-message" style="width:100%" /></td>
        </tr>
      </table>
      <table witdh="100%">
        <tr>
          <td colspan="2" width="100%">
            <input type="radio" name="commit-new" value="#f" onchange="javascript: { commitNewChanged (); }" />
            <span translate="_">Update current profile</span>
          </td>
        </tr>
        <tr>
          <td width="70%">
            <input type="radio" name="commit-new" value="#t" onchange="javascript: { commitNewChanged (); }" />
            <span translate="_">Create new profile, derived from current:</span>
          </td>
          <td width="30%">
            <input type="text" class="text" name="commit-branch" style="width:100%" />
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>
